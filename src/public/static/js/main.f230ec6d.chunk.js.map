{"version":3,"sources":["Util.js","Dashboard.js","Profile.js","Flvplayer.js","Streams.js","App.js","index.js"],"names":["bytesToSize","bytes","Number","i","parseInt","Math","floor","log","round","pow","bytesToBand","bits","secondsToDhms","seconds","d","h","m","s","secondsToDhmsSimple","getOption","name","title","text","tooltip","trigger","grid","left","right","bottom","containLabel","xAxis","type","boundaryGap","data","yAxis","max","series","areaStyle","normal","Dashboard","_Component","_getPrototypeOf2","_this","_classCallCheck","this","_len","arguments","length","args","Array","_key","_possibleConstructorReturn","_getPrototypeOf","call","apply","concat","count","lastInBytes","lastOtBytes","state","cpuOption","memOption","conOption","legend","netOption","axisPointer","animation","link","xAxisIndex","height","top","axisLine","onZero","show","gridIndex","position","inverse","yAxisIndex","fetch","credentials","then","response","json","net","inbytes","outbytes","now","Date","axisData","toLocaleTimeString","replace","_objectSpread","shift","uptime","push","cpu","load","mem","free","totle","toFixed","clients","rtmp","http","ws","setState","catch","e","_inherits","_createClass","key","value","timer","setInterval","clearInterval","React","createElement","_Row","style","margin","_Col","span","padding","_Card","ReactEchartsCore","echarts","ref","option","width","marginTop","Component","columns","dataIndex","Profile","loading","osInfo","os","arch","platform","release","cpuInfo","num","model","memInfo","nodeInfo","nodejs","version","uptimeInfo","versionInfo","Fragment","_Icon","paddingLeft","fontSize","_Table","dataSource","pagination","showHeader","Flvplayer","initFlv","$video","flvjs","isSupported","flvPlayer","createPlayer","props","config","attachMediaElement","play","unload","detachMediaElement","destroy","_this$props","className","Object","assign","Streams","cookies","Cookies","streamsData","visible","password","render","record","href","onClick","openVideo","children","updatePass","target","set","path","maxAge","sign","hash","md5","create","ext","update","app","hex","videoModal","_Modal","info","icon","content","url","index","stream","publisher","subscribers","getTime","str","connectCreated","streamData","id","clientId","ip","ac","audio","codec","profile","freq","samplerate","chan","channels","vc","video","size","fps","time","get","_Input","Password","prefix","color","marginBottom","placeholder","onChange","bordered","small","Header","_Layout","Sider","Content","Footer","App","fullTitle","shortTitle","collapsed","pathname","toggle","nextProps","nextContext","console","Router","minHeight","collapsible","_Menu","theme","mode","defaultSelectedKeys","createBrowserHistory","location","Item","Link","to","background","Route","exact","component","textAlign","rel","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.f230ec6d.chunk.js","sourcesContent":["\nexport function bytesToSize(bytes) {\n  if (bytes === 0) return '0 Byte';\n  bytes = Number(bytes);\n  let sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n  let i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));\n  return Math.round(bytes / Math.pow(1024, i), 2) + ' ' + sizes[i];\n};\n\nexport function bytesToBand(bytes) {\n  if (bytes === 0) return 0;\n  let bits = Number(bytes) * 8;\n  return Math.round(bits / Math.pow(1024, 2), 2);\n};\n\nexport function secondsToDhms(seconds) {\n  seconds = Number(seconds);\n  let d = Math.floor(seconds / (3600 * 24));\n  let h = Math.floor(seconds % (3600 * 24) / 3600);\n  let m = Math.floor(seconds % 3600 / 60);\n  let s = Math.floor(seconds % 60);\n\n  let dDisplay = d > 0 ? d + (d === 1 ? \" day, \" : \" days, \") : \"\";\n  let hDisplay = h > 0 ? h + (h === 1 ? \" hour, \" : \" hours, \") : \"\";\n  let mDisplay = m > 0 ? m + (m === 1 ? \" minute, \" : \" minutes, \") : \"\";\n  let sDisplay = s > 0 ? s + (s === 1 ? \" second\" : \" seconds\") : \"\";\n  return dDisplay + hDisplay + mDisplay + sDisplay;\n}\n\nexport function secondsToDhmsSimple(seconds) {\n  seconds = Number(seconds);\n  let d = Math.floor(seconds / (3600 * 24));\n  let h = Math.floor(seconds % (3600 * 24) / 3600);\n  let m = Math.floor(seconds % 3600 / 60);\n  let s = Math.floor(seconds % 60);\n\n  let dDisplay = d > 0 ? d + \"d,\" : \"\";\n  let hDisplay = h > 0 ? h + \"h,\" : \"\";\n  let mDisplay = m > 0 ? m + \"m,\" : \"\";\n  let sDisplay = s + \"s\";\n  return dDisplay + hDisplay + mDisplay + sDisplay;\n}","import React, { Component } from 'react';\nimport { Card, Row, Col } from 'antd';\nimport { bytesToBand } from \"./Util\";\nimport ReactEchartsCore from 'echarts-for-react/lib/core';\nimport echarts from 'echarts/lib/echarts';\nimport 'echarts/lib/chart/line';\nimport 'echarts/lib/component/legend';\nimport 'echarts/lib/component/tooltip';\nimport 'echarts/lib/component/title';\n\n\nfunction getOption(name) {\n  return {\n    title: {\n      text: name\n    },\n    tooltip: {\n      trigger: 'axis'\n    },\n    grid: {\n      left: '2%',\n      right: '4%',\n      bottom: '2%',\n      containLabel: true\n    },\n    xAxis: [\n      {\n        type: 'category',\n        boundaryGap: false,\n        data: []\n      }\n    ],\n    yAxis: [\n      {\n        type: 'value',\n        max: 100,\n      }\n    ],\n    series: [\n      {\n        name: name,\n        type: 'line',\n        areaStyle: { normal: {} },\n        data: []\n      },\n    ]\n  };\n}\n\nfunction getConnOption() {\n  return {\n    title: {\n      text: \"Connections\"\n    },\n    tooltip: {\n      trigger: 'axis'\n    },\n    legend: {\n      data: ['Rtmp', 'Http', 'WebSocket']\n    },\n    grid: {\n      left: '2%',\n      right: '4%',\n      bottom: '2%',\n      containLabel: true\n    },\n    xAxis: [\n      {\n        type: 'category',\n        boundaryGap: false,\n        data: []\n      }\n    ],\n    yAxis: [\n      {\n        type: 'value',\n      }\n    ],\n    series: [\n      {\n        name: \"Rtmp\",\n        type: 'line',\n        data: []\n      },\n      {\n        name: \"Http\",\n        type: 'line',\n        data: []\n      },\n      {\n        name: \"WebSocket\",\n        type: 'line',\n        data: []\n      },\n    ]\n  };\n}\n\nfunction getNetOption() {\n  return {\n    title: {\n      text: 'Network Bandwidth',\n    },\n    tooltip: {\n      trigger: 'axis',\n      axisPointer: {\n        animation: false\n      }\n    },\n    axisPointer: {\n      link: { xAxisIndex: 'all' }\n    },\n    legend: {\n      data: ['Input', 'Output']\n    },\n    grid: [{\n      left: 50,\n      right: 50,\n      height: '35%'\n    }, {\n      left: 50,\n      right: 50,\n      top: '55%',\n      height: '35%'\n    }],\n    xAxis: [\n      {\n        type: 'category',\n        boundaryGap: false,\n        axisLine: { onZero: true },\n        data: [],\n        show: false,\n      },\n      {\n        gridIndex: 1,\n        type: 'category',\n        boundaryGap: false,\n        axisLine: { onZero: true },\n        data: [],\n        position: 'bottom'\n      }\n    ],\n    yAxis: [\n      {\n        name: 'Mbps',\n        type: 'value',\n      },\n      {\n        gridIndex: 1,\n        type: 'value',\n        inverse: true\n      }\n    ],\n    series: [\n      {\n        name: 'Input',\n        type: 'line',\n        data: []\n      },\n      {\n        name: 'Output',\n        type: 'line',\n        xAxisIndex: 1,\n        yAxisIndex: 1,\n        data: []\n      }\n    ]\n  };\n}\n\nclass Dashboard extends Component {\n  count = 0;\n  lastInBytes = 0;\n  lastOtBytes = 0;\n\n  state = {\n    cpuOption: getOption('CPU Usage'),\n    memOption: getOption('Memory Usage'),\n    conOption: getConnOption(),\n    netOption: getNetOption(),\n  };\n\n  componentDidMount() {\n    this.fetch();\n    this.timer = setInterval(this.fetch, 2000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timer);\n  }\n\n  fetch = () => {\n    fetch('/api/server', {\n      credentials: 'include'\n    }).then(function (response) {\n      return response.json();\n    }).then((data) => {\n      this.lastInBytes = this.lastInBytes || data.net.inbytes;\n      this.lastOtBytes = this.lastOtBytes || data.net.outbytes;\n\n      let now = new Date();\n      let axisData = now.toLocaleTimeString().replace(/^\\D*/, '');\n\n      let cpuOption = { ...this.state.cpuOption };\n      let memOption = { ...this.state.memOption };\n      let conOption = { ...this.state.conOption };\n      let netOption = { ...this.state.netOption };\n\n      if (this.count++ > 30) {\n        cpuOption.xAxis[0].data.shift();\n        cpuOption.series[0].data.shift();\n\n        memOption.xAxis[0].data.shift();\n        memOption.series[0].data.shift();\n\n        conOption.xAxis[0].data.shift();\n        conOption.series[0].data.shift();\n        conOption.series[1].data.shift();\n        conOption.series[2].data.shift();\n\n        netOption.xAxis[0].data.shift();\n        netOption.xAxis[1].data.shift();\n        netOption.series[0].data.shift();\n        netOption.series[1].data.shift();\n      }\n\n      cpuOption.uptime = now;\n      cpuOption.xAxis[0].data.push(axisData);\n      cpuOption.series[0].data.push(data.cpu.load);\n\n      memOption.uptime = now;\n      memOption.xAxis[0].data.push(axisData);\n      memOption.series[0].data.push((100 - 100 * data.mem.free / data.mem.totle).toFixed(2));\n\n      conOption.uptime = now;\n      conOption.title.text = \"Connections \" + (data.clients.rtmp + data.clients.http + data.clients.ws);\n      conOption.xAxis[0].data.push(axisData);\n      conOption.series[0].data.push(data.clients.rtmp);\n      conOption.series[1].data.push(data.clients.http);\n      conOption.series[2].data.push(data.clients.ws);\n\n      netOption.uptime = now;\n      netOption.xAxis[0].data.push(axisData);\n      netOption.xAxis[1].data.push(axisData);\n      netOption.series[0].data.push(bytesToBand((data.net.inbytes - this.lastInBytes) / 2));\n      netOption.series[1].data.push(bytesToBand((data.net.outbytes - this.lastOtBytes) / 2));\n      this.lastInBytes = data.net.inbytes;\n      this.lastOtBytes = data.net.outbytes;\n      this.setState({ cpuOption, memOption, conOption, netOption });\n    }).catch(e => {\n    });\n  }\n\n  render() {\n\n    return (\n      <Row style={{ margin: \"0 -12px\" }}>\n        <Col span={12} style={{ padding: \"0 12px\" }}>\n          <Card>\n            <ReactEchartsCore\n              echarts={echarts}\n              ref='echarts_react'\n              option={this.state.conOption}\n              style={{ height: '348px', width: '100%' }}\n            />\n          </Card>\n\n        </Col>\n        <Col span={12} style={{ padding: \"0 12px\" }}>\n          <Card>\n            <ReactEchartsCore\n              echarts={echarts}\n              ref='echarts_react'\n              option={this.state.netOption}\n              style={{ height: '348px', width: '100%' }}\n            />\n          </Card>\n        </Col>\n\n        <Col span={12} style={{ padding: \"0 12px\", marginTop: \"16px\" }}>\n          <Card>\n            <ReactEchartsCore\n              echarts={echarts}\n              ref='echarts_react'\n              option={this.state.cpuOption}\n              style={{ height: '300px', width: '100%' }}\n            />\n          </Card>\n        </Col>\n        <Col span={12} style={{ padding: \"0 12px\", marginTop: \"16px\" }}>\n          <Card>\n            <ReactEchartsCore\n              echarts={echarts}\n              ref='echarts_react'\n              option={this.state.memOption}\n              style={{ height: '300px', width: '100%' }}\n            />\n          </Card>\n        </Col>\n      </Row>\n\n    );\n  }\n\n}\n\nexport default Dashboard;\n","import React, { Component, Fragment } from 'react';\nimport { Card, Icon, Table } from \"antd\";\nimport { bytesToSize, secondsToDhms } from \"./Util\";\n\nconst columns = [{\n    dataIndex: 'name',\n    key: 'name',\n    width: 200\n}, {\n    dataIndex: 'value',\n    key: 'value',\n}];\n\nclass Profile extends Component {\n\n    state = {\n        data: [],\n        loading: false,\n    };\n\n    componentDidMount() {\n        this.fetch();\n    }\n\n    fetch = () => {\n        this.setState({ loading: true });\n        fetch('/api/server', {\n            credentials: 'include'\n        }).then(function (response) {\n            return response.json();\n        }).then((data) => {\n            // Read total count from server\n            let osInfo = { key: 0, name: 'OS', value: data.os.arch + \"_\" + data.os.platform + \"_\" + data.os.release };\n            let cpuInfo = { key: 1, name: \"CPU\", value: data.cpu.num + \" x \" + data.cpu.model };\n            let memInfo = { key: 2, name: \"Memory\", value: bytesToSize(data.mem.totle) };\n            let nodeInfo = { key: 3, name: \"Node.js\", value: data.nodejs.version };\n            let uptimeInfo = { key: 4, name: \"Uptime\", value: secondsToDhms(data.nodejs.uptime) };\n            let versionInfo = { key: 5, name: \"Version\", value: data.version };\n            this.setState({\n                loading: false,\n                data: [osInfo, cpuInfo, memInfo, nodeInfo, uptimeInfo, versionInfo],\n            });\n        }).catch(e => {\n            this.setState({\n                loading: false,\n            });\n        });\n    }\n\n\n    render() {\n        return (\n            <Card title={<Fragment>\n                <Icon type=\"hdd\" />\n                <span style={{ paddingLeft: \"12px\", fontSize: \"16px\" }}>Server Info</span>\n            </Fragment>}>\n\n                <Table\n                    dataSource={this.state.data}\n                    columns={columns}\n                    loading={this.state.loading}\n                    pagination={false}\n                    showHeader={false} />\n            </Card>\n        );\n    }\n};\n\nexport default Profile;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport flvjs from 'flv.js';\n\n/**\n * react component wrap flv.js\n */\nexport default class Flvplayer extends Component {\n\n  static propTypes = {\n    className: PropTypes.string,\n    style: PropTypes.object,\n    /**\n     * media URL, can be starts with 'https(s)' or 'ws(s)' (WebSocket)\n     */\n    url: PropTypes.string,\n    /**\n     * media type, 'flv' or 'mp4'\n     */\n    type: PropTypes.oneOf(['flv', 'mp4']).isRequired,\n    /**\n     * whether the data source is a **live stream**\n     */\n    isLive: PropTypes.bool,\n    /**\n     * whether to enable CORS for http fetching\n     */\n    cors: PropTypes.bool,\n    /**\n     * whether to do http fetching with cookies\n     */\n    withCredentials: PropTypes.bool,\n    /**\n     * whether the stream has audio track\n     */\n    hasAudio: PropTypes.bool,\n    /**\n     * whether the stream has video track\n     */\n    hasVideo: PropTypes.bool,\n    /**\n     * total media duration, in milliseconds\n     */\n    duration: PropTypes.bool,\n    /**\n     * total file size of media file, in bytes\n     */\n    filesize: PropTypes.number,\n    /**\n     * Optional field for multipart playback, see MediaSegment\n     */\n    segments: PropTypes.arrayOf(PropTypes.shape({\n      /**\n       * indicates segment duration in milliseconds\n       */\n      duration: PropTypes.number.isRequired,\n      /**\n       * indicates segment file size in bytes\n       */\n      filesize: PropTypes.number,\n      /**\n       * indicates segment file URL\n       */\n      url: PropTypes.string.isRequired,\n    })),\n    /**\n     * @see https://github.com/Bilibili/flv.js/blob/master/docs/api.md#config\n     */\n    config: PropTypes.object,\n  }\n\n  initFlv = ($video) => {\n    if ($video) {\n      if (flvjs.isSupported()) {\n        let flvPlayer = flvjs.createPlayer({ ...this.props }, this.props.config);\n        flvPlayer.attachMediaElement($video);\n        flvPlayer.load();\n        flvPlayer.play();\n        this.flvPlayer = flvPlayer;\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.flvPlayer) {\n      this.flvPlayer.unload();\n      this.flvPlayer.detachMediaElement();\n      this.flvPlayer.destroy();\n    }\n  }\n\n  render() {\n    const { className, style } = this.props;\n    return (\n      <video\n        className={className}\n        style={Object.assign({\n          width: '100%',\n        }, style)}\n        ref={this.initFlv}\n      />\n    )\n  }\n}","import React, { Component } from 'react';\nimport { Icon, Card, Table, Modal, Input } from \"antd\";\nimport { secondsToDhmsSimple } from \"./Util\";\nimport Flvplayer from \"./Flvplayer\";\nimport Cookies from 'universal-cookie';\nimport md5 from 'js-md5';\n\nclass Streams extends Component {\n  cookies = new Cookies();\n\n  state = {\n    streamsData: [],\n    loading: false,\n    visible: false,\n    password: ''\n  };\n\n  columns = [{\n    title: 'App',\n    dataIndex: 'app',\n    key: 'app',\n  }, {\n    title: 'Name',\n    dataIndex: 'name',\n    key: 'name',\n    render: (name, record) => {\n      return <a href=\"##\" onClick={() => this.openVideo(record)}>{name}</a>;\n    }\n  }, {\n    title: 'ID',\n    dataIndex: 'id',\n    key: 'id',\n  }, {\n    title: 'IP',\n    dataIndex: 'ip',\n    key: 'ip',\n  }, {\n    title: 'Audio',\n    children: [{\n      title: 'codec',\n      dataIndex: 'ac',\n      key: 'ac',\n    }, {\n      title: 'freq',\n      dataIndex: 'freq',\n      key: 'freq',\n    }, {\n      title: 'chan',\n      dataIndex: 'chan',\n      key: 'chan',\n    },\n    ]\n  }, {\n    title: 'Video',\n    children: [{\n      title: 'codec',\n      dataIndex: 'vc',\n      key: 'vc',\n    }, {\n      title: 'size',\n      dataIndex: 'size',\n      key: 'size',\n    }, {\n      title: 'fps',\n      dataIndex: 'fps',\n      key: 'fps',\n    },]\n  },\n  {\n    title: 'Time',\n    dataIndex: 'time',\n    key: 'time',\n  }, {\n    title: 'Clients',\n    dataIndex: 'clients',\n    key: 'clients',\n  }];\n\n  componentDidMount() {\n    this.setState({\n      password: this.cookies.get('pass')\n    })\n    this.fetch();\n  }\n\n  updatePass = (e) => {\n    let password = e.target.value;\n    this.setState({\n      password\n    });\n    this.cookies.set('pass', password, { path: '/', maxAge: 31536000 })\n  }\n\n  openVideo = (record) => {\n    let sign = '';\n    if (this.state.password) {\n      let hash = md5.create();\n      let ext = Date.now() + 30000;\n      hash.update(`/${record.app}/${record.name}-${ext}-${this.state.password}`);\n      let key = hash.hex();\n      sign = `?sign=${ext}-${key}`;\n    }\n    this.videoModal = Modal.info({\n      icon: null,\n      title: \"Video Player\",\n      width: 640,\n      height: 480,\n      content: <Flvplayer url={`/${record.app}/${record.name}.flv${sign}`} type=\"flv\" />,\n    });\n  }\n\n  fetch = () => {\n    this.setState({ loading: true });\n    fetch('/api/streams', {\n      credentials: 'include'\n    }).then(function (response) {\n      return response.json();\n    }).then((data) => {\n      // Read total count from server\n      let streamsData = [];\n      let index = 0;\n      for (let app in data) {\n        for (let name in data[app]) {\n          let stream = data[app][name].publisher;\n          let clients = data[app][name].subscribers;\n          if (stream) {\n            let now = new Date().getTime() / 1000;\n            let str = new Date(stream.connectCreated).getTime() / 1000;\n            let streamData = {\n              key: index++,\n              app,\n              name,\n              id: stream.clientId,\n              ip: stream.ip,\n              ac: stream.audio ? stream.audio.codec + \" \" + stream.audio.profile : \"\",\n              freq: stream.audio ? stream.audio.samplerate : \"\",\n              chan: stream.audio ? stream.audio.channels : \"\",\n              vc: stream.video ? stream.video.codec + \" \" + stream.video.profile : \"\",\n              size: stream.video ? stream.video.width + \"x\" + stream.video.height : \"\",\n              fps: stream.video ? Math.floor(stream.video.fps) : \"\",\n              time: secondsToDhmsSimple(now - str),\n              clients: clients.length\n            };\n            streamsData.push(streamData);\n          }\n        }\n      }\n      this.setState({\n        loading: false,\n        streamsData,\n      });\n    }).catch(e => {\n      this.setState({\n        loading: false,\n      });\n    });\n  }\n\n\n  render() {\n    return (\n      <Card>\n        <Input.Password\n          size=\"large\"\n          prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n          style={{ marginBottom: \"16px\" }}\n          placeholder=\"input password\"\n          onChange={this.updatePass}\n          value={this.state.password} />\n        <Table\n          dataSource={this.state.streamsData}\n          columns={this.columns}\n          loading={this.state.loading}\n          bordered\n          small\n          pagination={false}\n        />\n      </Card>\n    );\n  }\n};\n\nexport default Streams;","import React, { Component } from 'react';\nimport { BrowserRouter as Router, Link, Route } from \"react-router-dom\";\nimport { Icon, Layout, Menu } from 'antd';\nimport { createBrowserHistory } from 'history';\nimport Dashboard from \"./Dashboard\";\nimport Profile from \"./Profile\";\nimport Streams from \"./Streams\";\n\nimport \"./App.css\"\n\n\nconst { Header, Sider, Content, Footer } = Layout;\n\nclass App extends Component {\n\n    fullTitle = \"NodeMediaServer\";\n\n    shortTitle = \"NMS\";\n\n    state = {\n        collapsed: false,\n        title: this.fullTitle,\n        pathname: \"/\"\n    };\n\n    toggle = () => {\n        this.setState({\n            collapsed: !this.state.collapsed,\n            title: this.state.collapsed ? this.fullTitle : this.shortTitle,\n        });\n    }\n\n    componentWillReceiveProps(nextProps, nextContext) {\n        console.log(nextProps, nextContext);\n    }\n\n    render() {\n        return (\n            <Router>\n                <Layout style={{ minHeight: \"100vh\" }}>\n                    <Sider\n                        width={256}\n                        trigger={null}\n                        collapsible\n                        collapsed={this.state.collapsed}>\n\n                        <div className=\"logo\"><h1>{this.state.title}</h1></div>\n\n                        <Menu theme=\"dark\" mode=\"inline\"\n                            defaultSelectedKeys={[createBrowserHistory().location.pathname]}\n                        >\n                            <Menu.Item key=\"/admin/\">\n                                <Link to=\"/admin/\">\n                                    <Icon type=\"dashboard\" />\n                                    <span>Dashboard</span>\n                                </Link>\n                            </Menu.Item>\n                            <Menu.Item key=\"/admin/streams\">\n                                <Link to=\"/admin/streams\">\n                                    <Icon type=\"video-camera\" />\n                                    <span>Streams</span>\n                                </Link>\n                            </Menu.Item>\n                            <Menu.Item key=\"/admin/profile\">\n                                <Link to=\"/admin/profile\">\n                                    <Icon type=\"profile\" />\n                                    <span>Profile</span>\n                                </Link>\n                            </Menu.Item>\n                        </Menu>\n                    </Sider>\n                    <Layout>\n                        <Header style={{ background: '#fff', padding: 0 }}>\n                            <Icon\n                                className=\"trigger\"\n                                type={this.state.collapsed ? 'menu-unfold' : 'menu-fold'}\n                                onClick={this.toggle}\n                            />\n                        </Header>\n                        <Content style={{\n                            margin: '24px 16px', minHeight: 280,\n                        }}>\n                            <Route exact path=\"/admin\" component={Dashboard} />\n                            <Route path=\"/admin/streams\" component={Streams} />\n                            <Route path=\"/admin/profile\" component={Profile} />\n                        </Content>\n                        <Footer style={{ textAlign: 'center' }}>\n                            Node-Media-Server Â©2019 Created by <a href=\"http://nodemedia.cn\" rel=\"noopener noreferrer\" target=\"_blank\">NodeMedia</a>.\n                        </Footer>\n                    </Layout>\n                </Layout>\n\n\n            </Router>\n        );\n    }\n\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}